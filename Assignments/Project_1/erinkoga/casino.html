<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino</title>
    <link rel="stylesheet" href="cstyle.css">
    <style>
        .casino {
            max-width: 320px;
            margin: 2rem auto;
            padding: 1.5rem;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            text-align: center;
        }
        .casino h1 { margin: 0 0 1rem; color: #fff; font-size: 1.5rem; }
        .balance { font-size: 1.2rem; color: #ffd700; margin-bottom: 1rem; }
        .casino label { display: block; color: #eee; margin-bottom: 0.25rem; }
        .casino input[type="number"] { width: 100%; padding: 0.5rem; box-sizing: border-box; margin-bottom: 0.75rem; }
        .choices { display: flex; gap: 0.5rem; justify-content: center; margin-bottom: 1rem; }
        .choices button { padding: 0.5rem 1rem; cursor: pointer; background: #1a5f2a; color: #fff; border: none; border-radius: 4px; }
        .choices button:hover { background: #2a7f3a; }
        .choices button.selected { background: #ffd700; color: #000; }
        #flip { padding: 0.6rem 1.5rem; font-size: 1rem; cursor: pointer; background: #8b0000; color: #fff; border: none; border-radius: 4px; margin-bottom: 1rem; }
        #flip:hover { background: #a00; }
        #flip:disabled { background: #555; cursor: not-allowed; }
        .result { min-height: 2rem; color: #fff; font-weight: bold; }
        .result.win { color: #90ee90; }
        .result.lose { color: #ffb6c1; }
        .tracker { margin-top: 1rem; color: #ccc; font-size: 0.9rem; }
        .tracker span { color: #90ee90; margin-right: 0.75rem; }
        .tracker .losses { color: #fff; }
        .back { margin-top: 1rem; }
        .back a { color: #ffd700; }
        .game-divider { border-top: 1px solid rgba(255,255,255,0.2); margin: 2rem 0 1rem; padding-top: 1.5rem; }
        .blackjack h2 { margin: 0 0 0.75rem; color: #fff; font-size: 1.25rem; }
        .blackjack .hand { min-height: 2rem; color: #eee; font-size: 1rem; margin-bottom: 0.5rem; word-spacing: 0.25rem; }
        .blackjack .hand-label { color: #ccc; font-size: 0.85rem; margin-bottom: 0.25rem; }
        .blackjack .bj-bet { margin-bottom: 0.75rem; }
        .blackjack .bj-bet input { width: 100%; padding: 0.5rem; box-sizing: border-box; }
        .blackjack .bj-actions { display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap; margin: 0.75rem 0; }
        .blackjack .bj-actions button { padding: 0.5rem 1rem; cursor: pointer; background: #1a5f2a; color: #fff; border: none; border-radius: 4px; }
        .blackjack .bj-actions button:hover:not(:disabled) { background: #2a7f3a; }
        .blackjack .bj-actions button:disabled { background: #555; cursor: not-allowed; }
        .blackjack .bj-actions #bjDeal { background: #8b0000; }
        .blackjack .bj-actions #bjDeal:hover:not(:disabled) { background: #a00; }
        .blackjack .bj-result { min-height: 1.5rem; color: #fff; font-weight: bold; margin-top: 0.5rem; }
    </style>
</head>
<body>
    <div class="casino">
        <div class="balance">Balance: <span id="balance">100</span> chips</div>
        <h1>Coin flip</h1>
        <label for="bet">Bet amount</label>
        <input type="number" id="bet" min="1" value="10" placeholder="Bet">
        <label>Choose</label>
        <div class="choices">
            <button type="button" data-choice="heads">Heads</button>
            <button type="button" data-choice="tails">Tails</button>
        </div>
        <button type="button" id="flip">Flip coin</button>
        <div class="result" id="result"></div>
        <div class="tracker">Wins: <span id="wins">0</span><span class="losses">Losses: <span id="losses">0</span></span></div>
        <div class="tracker">Won: <span id="totalWon">0</span> chips &nbsp; Lost: <span class="losses" id="totalLost">0</span> chips</div>

        <div class="game-divider blackjack">
            <h2>Blackjack</h2>
            <div class="hand-label">Dealer: <span id="bjDealerValue"></span></div>
            <div class="hand" id="bjDealerHand"></div>
            <div class="hand-label">You: <span id="bjPlayerValue"></span></div>
            <div class="hand" id="bjPlayerHand"></div>
            <div class="bj-bet">
                <label for="bjBet">Bet</label>
                <input type="number" id="bjBet" min="1" value="10" placeholder="Bet">
            </div>
            <div class="bj-actions">
                <button type="button" id="bjDeal">Deal</button>
                <button type="button" id="bjHit" disabled>Hit</button>
                <button type="button" id="bjStand" disabled>Stand</button>
            </div>
            <div class="bj-result" id="bjResult"></div>
            <div class="tracker" style="margin-top: 0.75rem;">Lost in blackjack: <span id="bjTotalLost">0</span> chips</div>
        </div>

        <div class="back"><a href="index.html">Back to lobby</a></div>
    </div>
    <script>
        let balance = 100;
        let choice = null;
        let wins = 0;
        let losses = 0;
        let totalWon = 0;
        let totalLost = 0;
        const balanceEl = document.getElementById('balance');
        const betEl = document.getElementById('bet');
        const resultEl = document.getElementById('result');
        const flipBtn = document.getElementById('flip');
        const winsEl = document.getElementById('wins');
        const lossesEl = document.getElementById('losses');
        const totalWonEl = document.getElementById('totalWon');
        const totalLostEl = document.getElementById('totalLost');

        document.querySelectorAll('.choices button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.choices button').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                choice = btn.dataset.choice;
            });
        });

        flipBtn.addEventListener('click', () => {
            const bet = Math.floor(Number(betEl.value)) || 0;
            if (bet < 1) { resultEl.textContent = 'Enter a bet of at least 1.'; resultEl.className = 'result'; return; }
            if (bet > balance) { resultEl.textContent = "You don't have enough chips."; resultEl.className = 'result'; return; }
            if (!choice) { resultEl.textContent = 'Pick heads or tails.'; resultEl.className = 'result'; return; }

            const side = Math.random() < 0.5 ? 'heads' : 'tails';
            const win = side === choice;
            if (win) {
                balance += bet;
                wins++;
                totalWon += bet;
                winsEl.textContent = wins;
                totalWonEl.textContent = totalWon;
                resultEl.textContent = `It was ${side}. You win ${bet} chips!`;
                resultEl.className = 'result win';
            } else {
                balance -= bet;
                losses++;
                totalLost += bet;
                lossesEl.textContent = losses;
                totalLostEl.textContent = totalLost;
                resultEl.textContent = `It was ${side}. You lose ${bet} chips.`;
                resultEl.className = 'result lose';
            }
            balanceEl.textContent = balance;
            if (balance <= 0) {
                resultEl.textContent += ' Game over. Refresh to play again.';
                flipBtn.disabled = true;
            }
        });

        // Blackjack
        const SUITS = ['♠', '♥', '♦', '♣'];
        const RANKS = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        function newDeck() {
            const deck = [];
            for (const s of SUITS) for (const r of RANKS) deck.push(r + s);
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        }
        function cardValue(card) {
            const r = card.slice(0, -1);
            if (r === 'A') return 11;
            if (['K', 'Q', 'J'].includes(r)) return 10;
            return parseInt(r, 10);
        }
        function handValue(hand) {
            let sum = 0;
            let aces = 0;
            for (const card of hand) {
                const v = cardValue(card);
                sum += v;
                if (v === 11) aces++;
            }
            while (sum > 21 && aces--) sum -= 10;
            return sum;
        }
        let bjDeck = [], playerHand = [], dealerHand = [], bjBetAmount = 0, dealerHole = null, bjTotalLost = 0;
        const bjDealerHandEl = document.getElementById('bjDealerHand');
        const bjPlayerHandEl = document.getElementById('bjPlayerHand');
        const bjDealerValueEl = document.getElementById('bjDealerValue');
        const bjPlayerValueEl = document.getElementById('bjPlayerValue');
        const bjBetEl = document.getElementById('bjBet');
        const bjResultEl = document.getElementById('bjResult');
        const bjTotalLostEl = document.getElementById('bjTotalLost');
        const bjDealBtn = document.getElementById('bjDeal');
        const bjHitBtn = document.getElementById('bjHit');
        const bjStandBtn = document.getElementById('bjStand');

        function bjUpdateDisplay(dealerReveal) {
            bjPlayerHandEl.textContent = playerHand.join(' ');
            bjPlayerValueEl.textContent = handValue(playerHand);
            if (dealerReveal && dealerHole !== null) {
                bjDealerHandEl.textContent = dealerHand.join(' ');
                bjDealerValueEl.textContent = handValue(dealerHand);
            } else {
                bjDealerHandEl.textContent = dealerHand.length ? dealerHand[0] + ' ?' : '';
                bjDealerValueEl.textContent = dealerHand.length ? String(cardValue(dealerHand[0])) : '';
            }
        }

        bjDealBtn.addEventListener('click', () => {
            const bet = Math.floor(Number(bjBetEl.value)) || 0;
            if (bet < 1) { bjResultEl.textContent = 'Enter a bet of at least 1.'; return; }
            if (bet > balance) { bjResultEl.textContent = "You don't have enough chips."; return; }
            balance -= bet;
            bjBetAmount = bet;
            balanceEl.textContent = balance;
            bjResultEl.textContent = '';
            bjDeck = newDeck();
            const four = [bjDeck.pop(), bjDeck.pop(), bjDeck.pop(), bjDeck.pop()];
            if (Math.random() < 0.6) {
                four.sort((a, b) => cardValue(b) - cardValue(a));
                playerHand = [four[2], four[3]];
                dealerHand = [four[0], four[1]];
            } else {
                playerHand = [four[0], four[1]];
                dealerHand = [four[2], four[3]];
            }
            dealerHole = dealerHand[1];
            bjUpdateDisplay(false);
            bjDealBtn.disabled = true;
            bjHitBtn.disabled = false;
            bjStandBtn.disabled = false;
            bjBetEl.disabled = true;
            if (handValue(playerHand) === 21) {
                bjResultEl.textContent = 'Blackjack! You win ' + bet + ' chips!';
                balance += bet * 2;
                balanceEl.textContent = balance;
                bjEndRound();
            }
        });

        bjHitBtn.addEventListener('click', () => {
            playerHand.push(bjDeck.pop());
            bjUpdateDisplay(false);
            if (handValue(playerHand) > 21) {
                bjTotalLost += bjBetAmount;
                bjTotalLostEl.textContent = bjTotalLost;
                bjResultEl.textContent = 'Bust! You lose.';
                bjEndRound();
            }
        });

        bjStandBtn.addEventListener('click', () => {
            bjDealerValueEl.textContent = '';
            bjDealerHandEl.textContent = '';
            while (handValue(dealerHand) < 17) dealerHand.push(bjDeck.pop());
            bjUpdateDisplay(true);
            const pv = handValue(playerHand);
            const dv = handValue(dealerHand);
            if (dv > 21) {
                bjResultEl.textContent = 'Dealer busts! You win ' + bjBetAmount + ' chips!';
                balance += bjBetAmount * 2;
            } else if (pv > dv) {
                bjResultEl.textContent = 'You win ' + bjBetAmount + ' chips!';
                balance += bjBetAmount * 2;
            } else if (pv < dv) {
                bjTotalLost += bjBetAmount;
                bjTotalLostEl.textContent = bjTotalLost;
                bjResultEl.textContent = 'Dealer wins.';
            } else {
                bjResultEl.textContent = 'Push. Bet returned.';
                balance += bjBetAmount;
            }
            balanceEl.textContent = balance;
            bjEndRound();
        });

        function bjEndRound() {
            bjDealBtn.disabled = false;
            bjHitBtn.disabled = true;
            bjStandBtn.disabled = true;
            bjBetEl.disabled = false;
            dealerHole = null;
        }
    </script>
</body>
</html>

